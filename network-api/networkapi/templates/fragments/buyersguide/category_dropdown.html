{% load static wagtailcore_tags localization bg_nav_tags wagtailimages_tags i18n %}

<button 
    class="
    pni-category-dropdown
    tw-bg-transparent
    tw-inline-flex
    tw-items-center
    tw-relative
    tw-pr-[20px]
    tw-py-[20px]
    tw-mr-[20px]
    tw-font-sans
    tw-font-bold
    tw-text-sm
    tw-group
    hover:tw-text-black
    tw-text-gray-40
    "
>
    {% trans "More" %}
    <svg width="11" height="7" viewBox="0 0 11 7" fill="none" xmlns="http://www.w3.org/2000/svg" class="tw-ml-2 tw-origin-center tw-stroke-gray-40 group-hover:tw-stroke-black">
        <title>{% trans "Open category drop down" %}</title>
        <path d="M1 1L5.02504 5.02504L9.05007 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <ul class="pni-category-dropdown-select tw-hidden tw-list-none tw-absolute tw-right-0 tw-p-0 tw-top-0 tw-z-50 tw-border-gray-20 tw-border">
        <li class="
            tw-bg-white
            tw-w-full
            tw-mr-0
            tw-font-sans
            tw-font-bold
            tw-no-underline
            tw-px-4
            tw-py-2
            tw-mb-0
            tw-text-black
            tw-flex
            tw-items-center
            tw-justify-end
            tw-text-sm
        ">
            {% trans "More" %}
            <svg width="11" height="7" viewBox="0 0 11 7" fill="none" xmlns="http://www.w3.org/2000/svg" class="tw-ml-2 tw-origin-center tw-stroke-black tw-rotate-180">
                <title>{% trans "Close category drop down" %}</title>
                <path d="M1 1L5.02504 5.02504L9.05007 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </li>
        {% for cat in categories|slice:"6:" %}
            {% with original=cat.original %}
                {% if cat.parent == None %}
                    {% if original.published_product_page_count > 0 %}
                    {% localizedroutablepageurl home_page 'category-view' original.slug as cat_url %}
                    <li class="tw-bg-white tw-text-gray-40 hover:tw-text-black tw-mb-0">
                        <a 
                            class="
                                multipage-link
                                tw-w-full
                                tw-mr-0
                                tw-font-sans
                                tw-font-bold
                                tw-no-underline
                                tw-px-4
                                tw-py-3
                                tw-text-right
                                {% check_active_category current_category cat %}{% if original.featured is True %} featured{% endif %}
                                "
                            href="{{ cat_url }}"
                            data-name="{{ cat.name }}"
                        >
                            {{ cat.name }}
                        </a>
                    </li>
                    {% endif %}
                {% endif %}
            {% endwith %}
        {% endfor %}
    </ul>

</button>
